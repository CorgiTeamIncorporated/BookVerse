{% set normalized_rating = rating * max_stars / max_rating %}
{% set full_stars = normalized_rating | int %}
{% set empty_stars = max_stars - 1 - full_stars %}
{% set last_star_percent = normalized_rating % 1 * 100 %}


<div class="star-rating">
    {% for _ in range(full_stars) %}
        <i class="stars-rating__star fa fa-star">
            <i class="stars-rating__star-filling fa fa-star" style="width: 100%;"></i>
        </i>
    {% endfor %}

    {% if full_stars != max_stars %}
        <i class="stars-rating__star fa fa-star">
            <i class="stars-rating__star-filling fa fa-star" style="width: {{ last_star_percent }}%;"></i>
        </i>
    {% endif %}

    {% for _ in range(empty_stars) %}
        <i class="stars-rating__star fa fa-star">
            <i class="stars-rating__star-filling fa fa-star" style="width: 0%;"></i>
        </i>
    {% endfor %}
</div>
